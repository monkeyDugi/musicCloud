[해당 프로젝트 리팩토링](https://github.com/monkeyDugi/monkey-music)
---

## 사용자 요구사항

### 영상 검색(Video)

- 영상 검색이 가능하다
  - Youtube api를 이용한다.
- 검색한 결과를 저장한다.
  - 데이터가 존재하지 않으면 저장한다.
- 검색한 결과를 리스팅
  - 20개 조회
- 회원만 가능

### 플레이리스트(PlayList)

- 검색한 영상의 **추가**버튼 클릭 시 마이리스트에 저장
- 마이리스트에서 **삭제**버튼 클릭 시 마이리스트에서 제거
- 많이 들은 곡 리스팅
- 회원만 가능

### 가장 조회 수가 많은 영상(Video 엔티티의 count)

- 가장 조회 수가 많은 영상을 메인 화면에 리스팅
- 5개
- 비회원도 가능

### 회원(Member)

- 구글 회원가입
  - 권한은 USER만 존재한다.



### 추후 예정

- 광고없는 영상 선택 여부
- 노래 라이브 영상 선택 여부
- 노래만 검색되게 선택 여부



## 도메인 모델과 테이블 설계

> 핵심은 회원이 플레이리스트를 관리하는 것이 아니다. 이는 사람 중심으로 생각하는 것 이다.
> 이렇게 되면 회원은 도메인이 복잡해질수록 모든 것을 관리하는 상태가 되어 버릴 것 이다.
> 이는 객체지향의 특성을 이해하지 못한 것이라고 볼 수 있다.
> **객체지향은 객체 하나하나가 모두 능동적이어야 한다.** 
> 여기서는 플레이리스트를 조회하고 저장하는 기능들은 회원의 기능이 아닌 플레이리스트의 기능이다.
> 즉, playList 객체 중심으로 봐야한다는 것 이다. playList가 주인이 되어 video, member를 관리하는 것 이다.

![스크린샷 2020-10-19 오전 12.19.38](https://user-images.githubusercontent.com/53487385/96930807-490d0600-14f7-11eb-837a-393c013968da.png)

- 플레이리스트와 회원은 N : 1 양방향 관계이다.
  - 주목적은 회원의 플레이리스트를 조회하는 것 이기 때문에 1 : N 으로 해야하지만, 외래키가 반대 테이블에 있다는게 혼란을 만들기 때문에
    차라리 N : 1 양방향으로 하는 것이 유지보수에 좋다. 또한 update 쿼리가 생기가 된다.
- 플레이리스트와 동영상은 N : 1 단방향 관계이다.
  - 회원에 해당하는 플레이리스트의 동영상을 조회하면 된다.